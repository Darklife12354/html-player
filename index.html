<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Media Player</title>
    <style>
        /* Custom Styles for the Dark Theme */
        body {
            background-color: #333;
            color: #fff;
            font-family: Arial, sans-serif;
            margin: 0;
            overflow: hidden;
        }
    
        #media-player {
            width: 400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #222;
            border: 2px solid #444;
            border-radius: 5px;
            overflow-y: auto;
            max-height: 100vh;
        }
    
        #playlist {
            list-style: none;
            padding: 0;
        }
    
        #playlist li {
            margin-bottom: 10px;
            padding: 5px;
            border: 1px solid #444;
            border-radius: 3px;
            cursor: pointer;
        }
    
        #playlist li.current {
            background-color: #555;
        }
    
        audio {
            width: 100%;
        }
    
        button {
            background-color: #444;
            color: #fff;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
            margin-right: 5px;
            cursor: pointer;
        }
    
        button:hover {
            background-color: #666;
        }
    
        #file-upload {
            display: none;
        }
    
        /* CSS Styles for Drag and Drop Indicator */
        #drop-area {
            width: 100%;
            height: 100px;
            border: 2px dashed #444;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
    
        #drop-area:hover {
            border-color: #666;
        }
    </style>
    
</head>
<body>
    <div id="media-player">
        <h1>Custom Media Player</h1>
        <audio id="audio" controls autoplay>
            Your browser does not support the audio element.
        </audio>
        <ul id="playlist">
            <!-- Your playlist items will be added here -->
        </ul>
        <div id="controls">
            <button id="prev-btn">Previous</button>
            <button id="play-pause-btn">Play</button>
            <button id="next-btn">Next</button>
            <button id="shuffle-btn">Shuffle</button>
            <button id="loop-btn">Loop</button>
            <label for="file-upload" id="upload-btn">Upload Folder</label>
            <input type="file" id="file-upload" webkitdirectory directory multiple>
        </div>
    </div>
    <div id="drop-area">
        <p>Drag and drop a folder here to add songs to the playlist.</p>
    </div>
    <script>
        // JavaScript for the Media Player
        const audio = document.getElementById('audio');
        const playlist = document.getElementById('playlist');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const shuffleBtn = document.getElementById('shuffle-btn');
        const loopBtn = document.getElementById('loop-btn');
        const uploadBtn = document.getElementById('upload-btn');
        const fileUpload = document.getElementById('file-upload');
        const dropArea = document.getElementById('drop-area');

        let currentSongIndex = 0;
        let isPlaying = false;
        let isLoopOn = false;
        let playlistItems = [];

        // Function to add a song to the playlist
        function addSongToPlaylist(file) {
            const li = document.createElement('li');
            li.textContent = file.name;
            playlist.appendChild(li);
            playlistItems.push(file);
            li.addEventListener('click', () => playSong(playlistItems.indexOf(file)));
        }

        // Function to play a song from the playlist
        function playSong(index) {
            if (index >= 0 && index < playlistItems.length) {
                currentSongIndex = index;
                audio.src = URL.createObjectURL(playlistItems[currentSongIndex]);
                audio.play();
                updatePlaylistUI();
            }
        }

        // Function to update the playlist UI
        function updatePlaylistUI() {
            playlist.querySelectorAll('li').forEach((item, index) => {
                if (index === currentSongIndex) {
                    item.classList.add('current');
                } else {
                    item.classList.remove('current');
                }
            });
        }

        // Event listeners for the media player controls
        playPauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
            } else {
                audio.play();
            }
            isPlaying = !isPlaying;
            playPauseBtn.textContent = isPlaying ? 'Pause' : 'Play';
        });

        nextBtn.addEventListener('click', () => {
            currentSongIndex = (currentSongIndex + 1) % playlistItems.length;
            playSong(currentSongIndex);
        });

        prevBtn.addEventListener('click', () => {
            currentSongIndex = (currentSongIndex - 1 + playlistItems.length) % playlistItems.length;
            playSong(currentSongIndex);
        });

        shuffleBtn.addEventListener('click', () => {
            playlistItems.sort(() => Math.random() - 0.5);
            playSong(0);
            updatePlaylistUI();
        });

        loopBtn.addEventListener('click', () => {
            isLoopOn = !isLoopOn;
            loopBtn.textContent = isLoopOn ? 'Loop On' : 'Loop Off';
            audio.loop = isLoopOn;
        });

        // Event listener for file upload
        fileUpload.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            playlistItems = [];
            playlist.innerHTML = '';
            files.forEach((file) => {
                if (file.type.startsWith('audio/')) {
                    addSongToPlaylist(file);
                }
            });
            playSong(0);
        });

        // Event listeners for drag and drop
        dropArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropArea.style.border = '2px dashed #666';
        });

        dropArea.addEventListener('dragleave', () => {
            dropArea.style.border = '2px dashed #444';
        });

        dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dropArea.style.border = '2px dashed #444';
            const files = Array.from(e.dataTransfer.files);
            playlistItems = [];
            playlist.innerHTML = '';
            files.forEach((file) => {
                if (file.type.startsWith('audio/')) {
                    addSongToPlaylist(file);
                }
            });
            playSong(0);
        });

        // Autoplay the next song when the current one ends
        audio.addEventListener('ended', () => {
            if (!isLoopOn) {
                currentSongIndex = (currentSongIndex + 1) % playlistItems.length;
                playSong(currentSongIndex);
            }
        });
    </script>
</body>
</html>
